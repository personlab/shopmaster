{% extends "blog/base_one.html" %}

{% load static %}


{% block content %}


<div class="post-main-top">
		{% if post.image %}
			<img src="{{ post.image.url }}" alt="{{ post.title }}" class="zoomable-img img-100 " style="max-width: 300px;">
		{% endif %}
			<h3 class="h4_collect_blog positionss">{{ post.title }}</h3>
			<p class="post-subtitle">{{ post.subtitle|default:'' }}</p> <!-- subtitle только для RecentPost -->
			<p class="post-author">Автор: {{ post.author_name }}</p>
			<p class="post-time">Время чтения: {{ post.reading_time }} мин.</p>
			<p>{{ post.content }}</p>
				
				<!-- Для модели Post выводим дополнительные блоки -->
		{% if post.content_1 or post.image_1 %}
			<div class="post-block">
		{% if post.image_1 %}
			<img src="{{ post.image_1.url }}" alt="Изображение 1" class="zoomable-img img-100" style="max-width: 300px;">
		{% endif %}
			<p>{{ post.content_1 }}</p>
			</div>
		{% endif %}

		{% if post.content_2 or post.image_2 %}
		<div class="post-block">
		{% if post.image_2 %}
				<img src="{{ post.image_2.url }}" alt="Изображение 2" class="zoomable-img img-100" style="max-width: 300px;">
		{% endif %}
			<p>{{ post.content_2 }}</p>
			</div>
		{% endif %}

		{% if post.content_3 or post.image_3 %}
			<div class="post-block">
		{% if post.image_3 %}
					<img src="{{ post.image_3.url }}" alt="Изображение 3" class="zoomable-img img-100" style="max-width: 300px;">
		{% endif %}
			<p>{{ post.content_3 }}</p>
			</div>
		{% endif %}

		</br>
		
		<ul class="tags__detail">
		{% for tag in tags %}
			<li><a href="{% url 'blog:tag_posts' tag.id %}"> #{{ tag.name }}&nbsp;</a></li>
		{% endfor %}
		</ul>


	<!-- Отображение формы для комментариев -->
	{% if form %}
	{% if user.is_authenticated %}
	<!-- Отображение имени пользователя -->
	<div class="comments_user">
			<p>Вы как:</p> <img class="comments_user_banner" src="{{ user.image.url }}" loading="lazy" alt="{{ user.username }}"><strong class="h2_posts_detail">{{ user.username }}</strong>
	</div>

	<!-- Форма для комментария -->
	<form id="users__commentss" method="POST" action="{% url 'blog:post_detail' slug=post.slug %}" data-user-image="{% if user.is_authenticated %}{{ user.image.url }}{% endif %}">
			{% csrf_token %}
			<textarea class="form__user__comment" name="text" cols="40" rows="10" placeholder="Ваше сообщение" required="" rezine="none" id="id_text"></textarea>
			<button class="btn__user__comment" type="submit">Отправить</button>
</form>
	{% else %}
	<!-- Сообщение для неавторизованных пользователей -->
	<p>Зарегистрируйтесь, чтобы оставить комментарий.</p>
	
	<div class="btn__box__log">
		<button class="bth__log__reg" id="login"><a href="{% url "user:login" %}">Войти</a></button>
		<button class="bth__log__reg btn__two__log" id="register">Регистрация</button>
	</div>
	{% endif %} 

	<!-- Отображение комментариев -->
	<h2>Комментарии:</h2>
	{% endif %}

	<div class="comment-list">
			{% for comment in post.comments.all %}
			<li>
					<div class="comment-card">
							<blockquote class="card-text">
									“{{ comment.text }}”
							</blockquote>
							<div class="profile-card comment__img">
									<figure>
											<img src={{ comment.author_image }} width="32" height="32" loading="lazy" alt="{{ comment.author }}">
									</figure>
									<div>
											<p class="card-title">{{ comment.author }}</p>
											<time datetime="{{ comment.created_at|date:'Y-m-d' }}" class="card-date">{{ comment.created_at|date:"d.m.Y H:i" }}</time>
									</div>
							</div>
					</div>
			</li>
			{% endfor %}
	</div>


	<br>



		<h2 class="h2_posts_detail"><a href="{% url 'blog:post_list' %}#recent"> Recent Posts</a></h2>
		<ul class="tags__detail">
			{% for recent_post, recent_tags in recent_posts_with_tags %}
				<li>
					<a href="{% url 'blog:post_detail' recent_post.slug %}">
						{{ recent_post.title|truncatechars:20 }}&nbsp; &nbsp; 
					</a>
				</li>
			{% endfor %}
		</ul>

		<div class="a_posts_return">
				<a href="{% url 'blog:post_list' %}">Назад к списку постов</a>
		</div>

<!-- Модальное окно для увеличенных изображений -->
<div id="imageModal" class="modal" style="display:none">
	<span class="close">&times;</span>
	<img class="modal-content" id="modalImg">
</div>

</div>

{% endblock content %}


{% block footer %}
	<!--
	- #FOOTER
-->

<footer>
		<div class="container">

				<div class="card footer">

						<div class="section footer-top">

								<div class="footer-brand">

										<a href="#" class="logo">
												<img src="{% static "deps/images/logo.svg" %}" width="119" height="37" loading="lazy" alt="Wren logo">
										</a>

										<p class="footer-text">
												When an unknown prnoto sans took a galley and scrambled it to make specimen book not only five When an unknown prnoto sans took a galley and scrambled it to five centurie.
										</p>

										<p class="footer-list-title">Address</p>

										<address class="footer-text address">
											123 Main Street <br>
											New York, NY 10001
										</address>

								</div>

								<div class="footer-list">

										<p class="footer-list-title">Categories</p>

										<ul>

												<li>
													<a href="#" class="footer-link hover-2">Action</a>
												</li>

												<li>
													<a href="#" class="footer-link hover-2">Bisiness</a>
												</li>

												<li>
													<a href="#" class="footer-link hover-2">Adventure</a>
												</li>

												<li>
													<a href="#" class="footer-link hover-2">Canada</a>
												</li>

												<li>
													<a href="#" class="footer-link hover-2">America</a>
												</li>

												<li>
													<a href="#" class="footer-link hover-2">Curiosity</a>
												</li>

												<li>
													<a href="#" class="footer-link hover-2">Animal</a>
												</li>

												<li>
													<a href="#" class="footer-link hover-2">Dental</a>
												</li>

												<li>
													<a href="#" class="footer-link hover-2">Biology</a>
												</li>

												<li>
													<a href="#" class="footer-link hover-2">Design</a>
												</li>

												<li>
													<a href="#" class="footer-link hover-2">Breakfast</a>
												</li>

												<li>
													<a href="#" class="footer-link hover-2">Dessert</a>
												</li>

										</ul>

								</div>

								<div class="footer-list">

									<form action="" id="contact-form">
										{% csrf_token %}
											<p class="footer-list-title">Contact me</p>

											<p class="footer-text">
													У вас есть вопросы? Напишите мне.
											</p>

											<div class="input-wrapper">
													<input type="text" name="user_name" placeholder="You name" required id="" class="input-field" autocomplete="off">

													<ion-icon name="person-outline" aria-hidden="true"></ion-icon>
											</div>

											<div class="input-wrapper">
													<input type="email" name="user_email" placeholder="Email address" required id="" class="input-field" autocomplete="off">

													<ion-icon name="mail-outline" aria-hidden="true"></ion-icon>
											</div>

											<div class="input-wrapper">
													<input type="tel" name="email_phone" placeholder="You nomber" required id="" class="input-field" autocomplete="off">

													<ion-icon name="phone-portrait-outline" aria-hidden="true"></ion-icon>
											</div>

											<div class="input-wrapper">
												<textarea name="user_message" class="input-field" cols="30" rows="6" placeholder="Сообщение" required ></textarea>
												<div class="ion_mess">
														<ion-icon name="send-outline"></ion-icon>
												</div>
											</div>


											<button type="submit" class="btn btn-primary">
													<span class="span">Отправить</span>

													<ion-icon name="arrow-forward" aria-hidden="true"></ion-icon>
											</button>

										</br>

											<p class="contact__message" id="contact-message">Статус отправки</p>
									</form>

								</div>

						</div>

						<div class="footer-bottom">
								<p class="copyright">
										Copyright &copy; <a href="#" class="copyright-link">TonGameApp</a> <span class="time"></span>
								</p>

								<ul class="social-list">

										<li>
												<a href="#" class="social-link">
													<ion-icon name="logo-twitter"></ion-icon>

													<span class="span">Twitter</span>
												</a>
										</li>

										<li>
												<a href="#" class="social-link">
													<ion-icon name="logo-linkedin"></ion-icon>

													<span class="span">Linkedin</span>
												</a>
										</li>

										<li>
												<a href="#" class="social-link">
													<ion-icon name="logo-instagram"></ion-icon>

													<span class="span">Instagram</span>
												</a>
										</li>

								</ul>
						</div>

				</div>

		</div>
</footer>

{% endblock footer %}
